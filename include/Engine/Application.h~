#pragma once
#include "InputHandler.h"
#include "Menu.h"
#include "Pong.h"
#include "Renderer.h"
#include "Scene.h"
#include "Setting.h"
#include "Window.h"

namespace BB {
  template <class scene>
  class Application{
  public:
    Application(){
      window = new Window(WIDTH, HEIGHT, "Pong");
      renderer = new Renderer();
      inputHandler = new InputHandler();
      Game = std::make_unique<Pong>();
      Game->loadResources();
      Setting = std::make_unique<SettingScene>();
      Menu = std::make_unique<MenuScene>();
      currScene = std::make_shared<scene>();
      currScene->Game = Game;
      currScene->Setting = Setting;
      currScene->Menu = Menu;
      currScene->loadResources();
      currScene->start();
    }

    void RunLoop(){
      // SetUp();

      bool quit = false;
      while (!quit) {
	//update
	inputHandler->handleInput(*currScene);

	renderer->Render(currScene);

	quit = WindowShouldClose() || currScene->shouldQuit();
      }
    }
  private:
    Window *window;
    Renderer* renderer;
    InputHandler* inputHandler;
    std::shared_ptr<Scene> currScene;
    std::shared_ptr<Scene> Game;
    std::shared_ptr<Scene> Setting;
    std::shared_ptr<Scene> Menu;
  };
  
    }
